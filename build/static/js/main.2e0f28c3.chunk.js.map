{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","components/ErrorMessage.js","App.js","index.js"],"names":["Person","_ref","person","deletePerson","react_default","a","createElement","name","number","onClick","Persons","personsToShow","map","components_Person","key","id","Filter","filter","handleFilterChange","value","onChange","Notification","message","className","baseUrl","services_persons","axios","get","then","response","data","newPerson","post","delete","concat","newObject","put","ErrorMessage","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","personService","filteredPersons","toLowerCase","startsWith","components_Notification","components_ErrorMessage","components_Filter","event","target","onSubmit","preventDefault","duplicatePerson","find","window","confirm","changedPerson","objectSpread","returnedPerson","setTimeout","catch","error","p","createdPerson","type","components_Persons","personToRemove","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2e0f28c3.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, deletePerson }) => { \r\n  return (\r\n    <div>\r\n    {person.name} {person.number}\r\n    <button onClick={deletePerson}>poista</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ personsToShow, deletePerson }) => {\r\n\r\n  return (\r\n    <div>\r\n      {personsToShow.map(person =>\r\n        <Person key={person.name} person={person} deletePerson={deletePerson(person.id)} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        rajaa näytettäviä <input value={filter} onChange={handleFilterChange} />\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className='success'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n  const request = axios.post(baseUrl, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  deletePerson,\r\n  update\r\n}","import React from 'react'\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='error'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorMessage","import React, { useState, useEffect } from 'react'\n\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\nimport ErrorMessage from './components/ErrorMessage';\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((persons) => {\n        setPersons(persons)\n      })\n  }, [])\n\n  const filteredPersons = persons.filter(\n    person => person.name.toLowerCase().startsWith(filter.toLowerCase())\n  )\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const duplicatePerson = persons.find(person => person.name === newName)\n\n    if (duplicatePerson) {\n      if (window.confirm(`${duplicatePerson.name} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        const changedPerson = { ...duplicatePerson, number: newNumber }\n        personService\n          .update(changedPerson.id, changedPerson)\n          .then(returnedPerson => {\n            setMessage(\n              `Vaihdettiin henkilön ${returnedPerson.name} numero`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setPersons(persons.map(person =>\n              person.id === returnedPerson.id ? returnedPerson : person\n            ))\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Valitettavasti henkilö ${duplicatePerson.name} on jo poistettu`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            setPersons(persons.filter(p => p.id !== duplicatePerson.id))\n          })\n      }\n      setNewName('')\n      setNewNumber('')\n      return\n    }\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    personService\n      .create(personObject)\n      .then(createdPerson => {\n        setMessage(\n          `Lisättiin henkilö ${createdPerson.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000);\n        setPersons(persons.concat(createdPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        //console.log(error.response.data.error)\n        setErrorMessage(\n          error.response.data.error\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n  }\n\n  const deletePerson = id => {\n    return () => {\n      //console.log(`Poistetaan henkilö jonka id on ${id}`)\n      const personToRemove = persons.find(person => person.id === id)\n      if (window.confirm(`Poistetaanko ${personToRemove.name}`))\n      personService\n        .deletePerson(id)\n        .then(() => {\n          setMessage(\n            `Poistettiin henkilö ${personToRemove.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n\n      <Notification message={message} />\n      <ErrorMessage message={errorMessage} />\n\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n      <h3>Lisää uusi</h3>\n      <form onSubmit={addPerson}>\n        <div>\n          nimi: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>\n          numero: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>\n      <h3>Numerot</h3>\n      <Persons personsToShow={filteredPersons} deletePerson={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}